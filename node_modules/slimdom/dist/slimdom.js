(function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.slimdom={})})("undefined"==typeof self?this:self,function(e){"use strict";function t(e){e._transients.forEach(function(e){e.node._registeredObservers.removeTransientRegisteredObserver(e)}),e._transients.length=0}function n(e){for(var t,n=e.observer._transients.length-1;0<=n;--n){if(t=e.observer._transients[n],t.source!==e)return;t.node._registeredObservers.removeTransientRegisteredObserver(t),e.observer._transients.splice(n,1)}}function o(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];Promise.resolve().then(function(){return e.apply(t,n)})}function r(){return ke}function a(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.some(function(n){return e.nodeType===n})}function d(e){switch(e.nodeType){case 3:case 7:case 8:return e.data.length;default:return e.childNodes.length;}}function p(e){for(var t=e,n=[];t;)n.unshift(t),t=t.parentNode;return n}function s(e){return a(e,9)?e:e.ownerDocument}function l(e){return e.parentNode.childNodes.indexOf(e)}function u(e){for(;e.parentNode;)e=e.parentNode;return e}function f(e,t){t(e);for(var n=e.firstChild;n;n=n.nextSibling)f(n,t)}function c(e,t,n){n||(n=s(e));var o=e._copy(n);if(t)for(var r=e.firstChild;r;r=r.nextSibling)o.appendChild(c(r,!0,n));return o}function m(e,t){if(e.length<t)throw new TypeError("Function should be called with at least "+t+" arguments")}function y(e,t){if(!(e instanceof t))throw new TypeError("Value should be an instance of "+t.name)}function h(e,t,n){var o=new Error(e+": "+n);return o.name=e,o.code=t,o}function g(e){throw h("HierarchyRequestError",3,e)}function b(e){throw h("IndexSizeError",1,e)}function _(e){throw h("InUseAttributeError",10,e)}function N(e){throw h("InvalidCharacterError",5,e)}function O(e){throw h("InvalidNodeTypeError",24,e)}function E(e){throw h("InvalidStateError",11,e)}function C(e){throw h("NamespaceError",14,e)}function w(e){throw h("NotFoundError",8,e)}function T(e){throw h("NotSupportedError",9,e)}function D(e){throw h("WrongDocumentError",4,e)}function x(e){return a(e,1,9,11)?e:null}function v(e){for(var t=[],n=e.firstElementChild;n;n=n.nextElementSibling)t.push(n);return t}function S(e){return a(e,1,8,7,3,4)?e:null}function P(e){for(var t=e.previousSibling;t;t=t.previousSibling)if(a(t,1))return t;return null}function I(e){for(var t=e.nextSibling;t;t=t.nextSibling)if(a(t,1))return t;return null}function R(e,t,n){e.parentNode=t;var o=null===n?t.lastChild:n.previousSibling,r=null===n?null:n;if(e.previousSibling=o,e.nextSibling=r,o?o.nextSibling=e:t.firstChild=e,r?(r.previousSibling=e,t.childNodes.splice(t.childNodes.indexOf(r),0,e)):(t.lastChild=e,t.childNodes.push(e)),a(e,1)){var d=e,i=x(t);if(i){for(var p=null,s=o;s;s=s.previousSibling){if(a(s,1)){p=s;break}var l=S(s);if(l){p=l.previousElementSibling;break}}for(var u=null,s=r;s;s=s.nextSibling){if(a(s,1)){u=s;break}var l=S(s);if(l){u=l.nextElementSibling;break}}p||(i.firstElementChild=d),u||(i.lastElementChild=d),i.childElementCount+=1}}if(a(t,9)){var f=t;a(e,1)?f.documentElement=e:a(e,10)&&(f.doctype=e)}}function A(e,t){var n=e.previousSibling,o=e.nextSibling,r=a(e,1),d=r?e.previousElementSibling:null,i=r?e.nextElementSibling:null;if(e.parentNode=null,e.previousSibling=null,e.nextSibling=null,n?n.nextSibling=o:t.firstChild=o,o?o.previousSibling=n:t.lastChild=n,t.childNodes.splice(t.childNodes.indexOf(e),1),r){var p=x(t);p&&(p.firstElementChild===e&&(p.firstElementChild=i),p.lastElementChild===e&&(p.lastElementChild=d),p.childElementCount-=1)}if(a(t,9)){var s=t;a(e,1)?s.documentElement=null:a(e,10)&&(s.doctype=null)}}function M(e,t,n){for(var o=[],a=[],d=t;d;d=d.parentNode)d._registeredObservers.collectInterestedObservers(e,t,n,o,a);var i=r(t);o.forEach(function(o,r){var d=a[r],p=new Ve(e,t);n.name!==void 0&&n.namespace!==void 0&&(p.attributeName=n.name,p.attributeNamespace=n.namespace),d!==void 0&&(p.oldValue=d),n.addedNodes!==void 0&&(p.addedNodes=n.addedNodes),n.removedNodes!==void 0&&(p.removedNodes=n.removedNodes),n.previousSibling!==void 0&&(p.previousSibling=n.previousSibling),n.nextSibling!==void 0&&(p.nextSibling=n.nextSibling),i._notifyList.appendRecord(o,p)}),i._notifyList.queueMutationObserverCompoundMicrotask()}function U(e,t,n){if(a(t,9,11,1)||g("parent must be a Document, DocumentFragment or Element node"),e.contains(t)&&g("node must not be an inclusive ancestor of parent"),n&&n.parentNode!==t&&w("child is not a child of parent"),a(e,11,10,1,3,4,7,8)||g("node must be a DocumentFragment, DocumentType, Element, Text, ProcessingInstruction or Comment node"),a(e,3)&&a(t,9)&&g("can not insert a Text node under a Document"),a(e,10)&&!a(t,9)&&g("can only insert a DocumentType node under a Document"),a(t,9)){var o=t;switch(e.nodeType){case 11:var r=e;r.firstElementChild!==r.lastElementChild&&g("can not insert more than one element under a Document"),Array.from(r.childNodes).some(function(e){return a(e,3)})&&g("can not insert a Text node under a Document"),r.firstElementChild&&(o.documentElement||n&&a(n,10)||n&&o.doctype&&l(n)<l(o.doctype))&&g("Document should contain at most one doctype, followed by at most one element");break;case 1:(o.documentElement||n&&a(n,10)||n&&o.doctype&&l(n)<l(o.doctype))&&g("Document should contain at most one doctype, followed by at most one element");break;case 10:(o.doctype||n&&o.documentElement&&l(o.documentElement)<l(n)||!n&&o.documentElement)&&g("Document should contain at most one doctype, followed by at most one element");}}}function L(e,t,n){U(e,t,n);var o=n;return o===e&&(o=e.nextSibling),Q(e,s(t)),k(e,t,o),e}function k(e,t,n,o){void 0===o&&(o=!1);var i=a(e,11),p=i?d(e):1;if(null!==n){var s=l(n),u=r(e);u._ranges.forEach(function(e){e.startContainer===t&&e.startOffset>s&&(e.startOffset+=p),e.endContainer===t&&e.endOffset>s&&(e.endOffset+=p)})}var f=i?Array.from(e.childNodes):[e];i&&f.forEach(function(t){return F(t,e,!0)}),i&&M("childList",e,{removedNodes:f});var c=null===n?t.lastChild:n.previousSibling;f.forEach(function(e){R(e,t,n)}),o||M("childList",t,{addedNodes:f,nextSibling:n,previousSibling:c})}function V(e,t){return L(e,t,null)}function z(e,t,n){if(a(n,9,11,1)||g("Can not replace under a non-parent node"),t.contains(n)&&g("Can not insert a node under its own descendant"),e.parentNode!==n&&w("child is not a child of parent"),a(t,11,10,1,3,4,7,8)||g("Can not insert a node that isn't a DocumentFragment, DocumentType, Element, Text, ProcessingInstruction or Comment"),a(t,3)&&a(n,9)&&g("can not insert a Text node under a Document"),a(t,10)&&!a(n,9)&&g("can only insert a DocumentType node under a Document"),a(n,9)){var o=n;switch(t.nodeType){case 11:var r=t;r.firstElementChild!==r.lastElementChild&&g("can not insert more than one element under a Document"),Array.from(r.childNodes).some(function(e){return a(e,3)})&&g("can not insert a Text node under a Document"),r.firstElementChild&&(o.documentElement&&o.documentElement!==e||e&&o.doctype&&l(e)<l(o.doctype))&&g("Document should contain at most one doctype, followed by at most one element");break;case 1:(o.documentElement&&o.documentElement!==e||o.doctype&&l(e)<l(o.doctype))&&g("Document should contain at most one doctype, followed by at most one element");break;case 10:(o.doctype&&o.doctype!==e||o.documentElement&&l(o.documentElement)<l(e))&&g("Document should contain at most one doctype, followed by at most one element");}}var d=e.nextSibling;d===t&&(d=t.nextSibling);var i=e.previousSibling;Q(t,s(n));var p=[];null!==e.parentNode&&(p.push(e),F(e,e.parentNode,!0));var u=a(t,11)?Array.from(t.childNodes):[t];return k(t,n,d,!0),M("childList",n,{addedNodes:u,removedNodes:p,nextSibling:d,previousSibling:i}),e}function X(e,t){return e.parentNode!==t&&w("child is not a child of parent"),F(e,t),e}function F(e,t,n){void 0===n&&(n=!1);var o=l(e),a=r(e);a._ranges.forEach(function(n){e.contains(n.startContainer)&&(n.startContainer=t,n.startOffset=o),e.contains(n.endContainer)&&(n.endContainer=t,n.endOffset=o),n.startContainer===t&&n.startOffset>o&&(n.startOffset-=1),n.endContainer===t&&n.endOffset>o&&(n.endOffset-=1)});var d=e.previousSibling,i=e.nextSibling;A(e,t);for(var p=t;p;p=p.parentNode)p._registeredObservers.appendTransientRegisteredObservers(e);n||M("childList",t,{removedNodes:[e],nextSibling:i,previousSibling:d})}function Q(e,t){var n=s(e);e.parentNode&&F(e,e.parentNode);t===n||f(e,function(e){if(e.ownerDocument=t,a(e,1))for(var n,o=0,r=e.attributes;o<r.length;o++)n=r[o],n.ownerDocument=t})}function q(e){return e>>>0}function j(e){return null===e?"":e+""}function Y(e,t){return y(e,t),e}function B(e,t){return void 0===e||null===e?null:Y(e,t)}function H(e){return void 0===e?null:e}function G(e,t,n){M("attributes",t,{name:e.localName,namespace:e.namespaceURI,oldValue:e.value}),e._value=n}function W(e,t){M("attributes",t,{name:e.localName,namespace:e.namespaceURI,oldValue:null}),t.attributes.push(e),e.ownerElement=t}function K(e,t){M("attributes",t,{name:e.localName,namespace:e.namespaceURI,oldValue:e.value}),t.attributes.splice(t.attributes.indexOf(e),1),e.ownerElement=null}function J(e,t,n){M("attributes",n,{name:e.localName,namespace:e.namespaceURI,oldValue:e.value}),n.attributes.splice(n.attributes.indexOf(e),1,t),e.ownerElement=null,t.ownerElement=n}function Z(e,t){var n=e.ownerElement;null===n?e._value=t:G(e,n,t)}function $(e,t,n,o){t=q(t),n=q(n);var a=e.length;t>a&&b("can not replace data past the node's length"),t+n>a&&(n=a-t),M("characterData",e,{oldValue:e.data});var d=e.data,i=d.substring(0,t)+o+d.substring(t+n);e._data=i;var p=r(e);p._ranges.forEach(function(r){r.startContainer===e&&r.startOffset>t&&r.startOffset<=t+n&&(r.startOffset=t),r.endContainer===e&&r.endOffset>t&&r.endOffset<=t+n&&(r.endOffset=t),r.startContainer===e&&r.startOffset>t+n&&(r.startOffset=r.startOffset+o.length-n),r.endContainer===e&&r.endOffset>t+n&&(r.endOffset=r.endOffset+o.length-n)})}function ee(e,t,n){t=q(t),n=q(n);var o=e.length;return t>o&&b("can not substring data past the node's length"),t+n>o?e.data.substring(t):e.data.substring(t,t+n)}function te(e,t){var n=e.length;t>n&&b("can not split past the node's length");var o=n-t,a=ee(e,t,o),d=r(e),i=new d.Text(a);i.ownerDocument=e.ownerDocument;var p=e.parentNode;if(null!==p){k(i,p,e.nextSibling);var s=l(e)+1,u=r(e);u._ranges.forEach(function(n){n.startContainer===e&&n.startOffset>t&&(n.startContainer=i,n.startOffset-=t),n.endContainer===e&&n.endOffset>t&&(n.endContainer=i,n.endOffset-=t),n.startContainer===p&&n.startOffset===s&&(n.startOffset+=1),n.endContainer===p&&n.endOffset===s&&(n.endOffset+=1)})}return $(e,t,o,""),i}function ne(e){return He.test(e)}function oe(e){var t=e.split(":");return!(2<t.length)&&(!(1!==t.length)||0<t[0].length&&ne(t[1]))}function re(e){oe(e)&&ne(e)||N("The qualified name is not a valid Name or QName")}function ae(e,t){""===e&&(e=null),re(t);var n=null,o=t,r=t.indexOf(":");return 0<=r&&(n=t.substring(0,r),o=t.substring(r+1)),null!==n&&null===e&&C("Qualified name with prefix can not have a null namespace"),"xml"===n&&"http://www.w3.org/XML/1998/namespace"!==e&&C("xml prefix can only be used for the XML namespace"),("xmlns"===t||"xmlns"===n)&&"http://www.w3.org/2000/xmlns/"!==e&&C("xmlns prefix or qualifiedName must use the XMLNS namespace"),"http://www.w3.org/2000/xmlns/"===e&&"xmlns"!==t&&"xmlns"!==n&&C("xmlns prefix or qualifiedName must be used for the XMLNS namespace"),{namespace:e,prefix:n,localName:o}}function de(e,t){if(e.namespaceURI===t&&null!==e.prefix)return e.prefix;var n=Array.from(e.attributes).find(function(e){return"xmlns"===e.prefix&&e.value===t});return n?n.localName:null===e.parentElement?null:de(e.parentElement,t)}function ie(e,t,n){for(var o=null,r=0,a=e.attributes;r<a.length;r++){var d=a[r],i=d.namespaceURI,p=d.prefix;if("http://www.w3.org/2000/xmlns/"===i){if(null===p){o=d.value;continue}var s=d.localName,l=d.value;if("http://www.w3.org/XML/1998/namespace"===l)continue;if(""===l&&(l=null),t.checkIfFound(s,l))continue;t.add(s,l),n[s]=null===l?"":l}}return o}function pe(e,t,n){void 0===n&&(n=!1);for(var o,r=n?[e]:e.childNodes,a=[],d=0,i=r;d<i.length;d++)o=i[d],se(o,t,a);return a.join("")}function se(e,t,n){var o=new Ge;o.add("xml","http://www.w3.org/XML/1998/namespace");try{le(e,null,o,{value:1},t,n)}catch(e){return E(e.message)}}function le(e,t,n,o,r,a){switch(e.nodeType){case 1:return void ue(e,t,n,o,r,a);case 9:return void ye(e,t,n,o,r,a);case 8:return void he(e,t,n,o,r,a);case 4:return void ge(e,t,n,o,r,a);case 3:return void be(e,t,n,o,r,a);case 11:return void _e(e,t,n,o,r,a);case 10:return void Ne(e,t,n,o,r,a);case 7:return void Oe(e,t,n,o,r,a);case 2:return;default:throw new TypeError("Only Nodes and Attr objects can be serialized by this algorithm.");}}function ue(e,t,n,o,r,a){var d=e;if(r&&(0<=d.localName.indexOf(":")||!ne(d.localName)))throw new Error("The serialization of this node would not be a well-formed element");a.push("<");var i="",p=!1,s=!1,l=n.copy(),u={},f=ie(d,l,u),c=t,m=d.namespaceURI;if(c===m)null!==f&&(s=!0),i+="http://www.w3.org/XML/1998/namespace"===m?"xml:"+d.localName:d.localName,a.push(i);else{var y=d.prefix,h=l.retrievePreferredPrefixString(y,m);if("xmlns"===y){if(r)throw new Error("An Element with prefix \"xmlns\" will not legally round-trip in a conforming XML parser");h=y}null===h?null===y?null===f||null!==f&&f!==m?(s=!0,i+=d.localName,c=m,a.push(i),a.push(" xmlns=\"",ce(m,r),"\"")):(i+=d.localName,c=m,a.push(i)):(y in u&&(y=me(l,m,o)),l.add(y,m),i+=y+":"+d.localName,a.push(i),a.push(" xmlns:",y,"=\"",ce(m,r),"\""),null!==f&&(c=""===f?null:f)):(i+=h+":"+d.localName,null!==f&&"http://www.w3.org/XML/1998/namespace"!==f&&(c=""===f?null:f),a.push(i))}if(fe(d,l,o,u,s,r,a),"http://www.w3.org/1999/xhtml"===m&&!d.hasChildNodes()&&0<=Je.indexOf(d.localName)&&(a.push(" /"),p=!0),"http://www.w3.org/1999/xhtml"===m||d.hasChildNodes()||(a.push("/"),p=!0),a.push(">"),!p){for(var g,b=0,_=e.childNodes;b<_.length;b++)g=_[b],le(g,c,l,o,r,a);a.push("</",i,">")}}function fe(e,t,n,o,r,a,d){for(var i,p=[],s=function(e){if(a&&p.find(function(t){return t.localName===e.localName&&t.namespaceURI===e.namespaceURI}))throw new Error("The serialization of this attr would fail to produce a well-formed element serialization");p.push({namespaceURI:e.namespaceURI,localName:e.localName});var i=e.namespaceURI,s=null;if(null!==i)if(s=t.retrievePreferredPrefixString(e.prefix,i),"http://www.w3.org/2000/xmlns/"===i){if("http://www.w3.org/XML/1998/namespace"===e.value)return"continue";if(null===e.prefix&&r)return"continue";if(null!==e.prefix&&(!(e.localName in o)||o[e.localName]!==e.value))return"continue";if(a&&"http://www.w3.org/2000/xmlns/"===e.value)throw new Error("The serialization of this attribute would produce invalid XML because the XMLNS namespace is reserved and cannot be applied as an element's namespace via XML parsing");if(a&&""===e.value)throw new Error("Namespace prefix declarations cannot be used to undeclare a namespace (use a default namespace declaration instead)");"xmlns"===e.prefix&&(s="xmlns")}else null===s&&(s=null===e.prefix||(e.prefix in o)?me(t,i,n):e.prefix,t.add(s,e.namespaceURI),o[s]=e.namespaceURI,d.push(" xmlns:",s,"=\"",ce(i,a),"\""));if(d.push(" "),null!==s&&d.push(s,":"),a&&(0<=e.localName.indexOf(":")||!ne(e.localName)||"xmlns"===e.localName&&null===i))throw new Error("The serialization of this attr would not be a well-formed attribute");d.push(e.localName,"=\"",ce(e.value,a),"\"")},l=0,u=e.attributes;l<u.length;l++)i=u[l],s(i)}function ce(e,t){if(t&&null!==e&&!We.test(e))throw new Error("The serialization of this attribute value would fail to produce a well-formed element serialization");return null===e?"":e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function me(e,t,n){var o="ns"+n.value;return n.value+=1,e.add(o,t),o}function ye(e,t,n,o,r,a){var d=e;if(r&&null===d.documentElement)throw new Error("The serialization of this node would not be a well-formed document");for(var i,p=0,s=d.childNodes;p<s.length;p++)i=s[p],le(i,t,n,o,r,a)}function he(e,t,n,o,r,a){var d=e;if(r&&(!We.test(d.data)||0<=d.data.indexOf("--")||d.data.endsWith("-")))throw new Error("The serialization of this node's data would not be well-formed");a.push("<!--",d.data,"-->")}function ge(e,t,n,o,r,a){a.push("<![CDATA[",e.data,"]]>")}function be(e,t,n,o,r,a){var d=e;if(r&&!We.test(d.data))throw new Error("The serialization of this node's data would not be well-formed");var i=d.data;i=i.replace(/&/g,"&amp;"),i=i.replace(/</g,"&lt;"),i=i.replace(/>/g,"&gt;"),a.push(i)}function _e(e,t,n,o,r,a){for(var d,i=0,p=e.childNodes;i<p.length;i++)d=p[i],le(d,t,n,o,r,a)}function Ne(e,t,n,o,r,a){var d=e;if(r&&!Ke.test(d.publicId))throw new Error("The serialization of this node would not be a well-formed document type declaration");if(r&&(!We.test(d.systemId)||0<=d.systemId.indexOf("\"")&&0<=d.systemId.indexOf("'")))throw new Error("The serialization of this node would not be a well-formed document type declaration");a.push("<!DOCTYPE"),a.push(" "),a.push(d.name),""!==d.publicId&&a.push(" PUBLIC \"",d.publicId,"\""),""!==d.systemId&&""===d.publicId&&a.push(" SYSTEM"),""!==d.systemId&&a.push(" \"",d.systemId,"\""),a.push(">")}function Oe(e,t,n,o,r,a){var d=e;if(r&&(0<=d.target.indexOf(":")||"xml"===d.target.toLowerCase()))throw new Error("The serialization of this node's target would not be well-formed");if(r&&(!We.test(d.data)||0<=d.data.indexOf("?>")))throw new Error("The serialization of this node's data would not be well-formed");a.push("<?",d.target," ",d.data,"?>")}function Ee(e,t,n,o){void 0===o&&(o=null);var a=null,d=r(e);return a=new d.Element(n,o,t),a.ownerDocument=e,a}function Ce(e,t){return t.attributes.find(function(t){return t.name===e})||null}function we(e,t,n){return""===e&&(e=null),n.attributes.find(function(n){return n.namespaceURI===e&&n.localName===t})||null}function Te(e,t){null!==e.ownerElement&&e.ownerElement!==t&&_("attribute is in use by another element");var n=we(e.namespaceURI,e.localName,t);return n===e?e:(null===n?W(e,t):J(n,e,t),n)}function De(e,t,n,o,a){var d=we(a,t,e);if(null===d){var i=r(e),p=new i.Attr(a,o,t,n,e);return p.ownerDocument=e.ownerDocument,void W(p,e)}G(d,e,n)}function xe(e,t){var n=Ce(e,t);return null!==n&&K(n,t),n}function ve(e,t,n){var o=we(e,t,n);return null!==o&&K(o,n),o}function Se(e,t,n){var o=ae(t,n),r=o.namespace,a=o.prefix,d=o.localName,i=Ee(e,d,r,a);return i}function Pe(e){return e.startContainer===e.endContainer&&e.startOffset===e.endOffset}function Ie(e,t,n,o){if(e!==n){for(var r=p(e),a=p(n);r[0]&&a[0]&&r[0]===a[0];)r.shift(),a.shift();r.length&&(t=l(r[0])+.5),a.length&&(o=l(a[0])+.5)}return t===o?0:t<o?-1:1}function Re(e){return u(e.startContainer)}var Ae=function(){function e(e,t,n,o){this.source=null,this.observer=e,this.node=t,this.options=n,this.source=o||null,o&&e._transients.push(this)}return e.prototype.collectInterestedObservers=function(e,t,n,o,r){if((this.node===t||this.options.subtree)&&("attributes"!==e||this.options.attributes)&&("characterData"!==e||this.options.characterData)&&("childList"!==e||this.options.childList)){var a=o.indexOf(this.observer);0>a&&(a=o.length,o.push(this.observer),r.push(void 0)),("attributes"===e&&this.options.attributeOldValue||"characterData"===e&&this.options.characterDataOldValue)&&(r[a]=n.oldValue)}},e}(),Me=function(){function e(e){this._registeredObservers=[],this._node=e}return e.prototype.register=function(e,t){var o=this._registeredObservers,r=!1;o.forEach(function(o){o.observer!==e||(r=!0,n(o),o.options=t)}),r||(this._registeredObservers.push(new Ae(e,this._node,t)),e._nodes.push(this._node))},e.prototype.removeTransientRegisteredObserver=function(e){this._registeredObservers.splice(this._registeredObservers.indexOf(e),1)},e.prototype.removeForObserver=function(e){for(var t,n=0,o=0,r=this._registeredObservers.length;o<r;++o)(t=this._registeredObservers[o],t.observer!==e)&&(o!==n&&(this._registeredObservers[n]=t),++n);this._registeredObservers.length=n},e.prototype.collectInterestedObservers=function(e,t,n,o,r){this._registeredObservers.forEach(function(a){a.collectInterestedObservers(e,t,n,o,r)})},e.prototype.appendTransientRegisteredObservers=function(e){this._registeredObservers.forEach(function(t){t.options.subtree&&e._registeredObservers.registerTransient(t)})},e.prototype.registerTransient=function(e){this._registeredObservers.push(new Ae(e.observer,this._node,e.options,e))},e}(),Ue=function(){function e(){this._notifyList=[],this._compoundMicrotaskQueued=!1}return e.prototype.appendRecord=function(e,t){e._recordQueue.push(t),this._notifyList.push(e)},e.prototype.queueMutationObserverCompoundMicrotask=function(){var e=this;this._compoundMicrotaskQueued||(this._compoundMicrotaskQueued=!0,o(function(){e._notifyMutationObservers()},this))},e.prototype._notifyMutationObservers=function(){var e=this;this._compoundMicrotaskQueued=!1;var n=this._notifyList.concat();this._notifyList.length=0,n.forEach(function(n){o(function(e){var n=e.takeRecords();t(e),n.length&&e._callback(n,e)},e,n)})},e}(),Le=function(){return function(){this._notifyList=new Ue,this._ranges=[]}}(),ke=new Le,Ve=function(){return function(e,t){this.addedNodes=[],this.removedNodes=[],this.previousSibling=null,this.nextSibling=null,this.attributeName=null,this.attributeNamespace=null,this.oldValue=null,this.type=e,this.target=t}}(),Node=function(){function Node(){this.ownerDocument=null,this.parentNode=null,this.childNodes=[],this.firstChild=null,this.lastChild=null,this.previousSibling=null,this.nextSibling=null,this._registeredObservers=new Me(this)}return Object.defineProperty(Node.prototype,"parentElement",{get:function(){return this.parentNode&&a(this.parentNode,1)?this.parentNode:null},enumerable:!0,configurable:!0}),Node.prototype.hasChildNodes=function(){return!!this.childNodes.length},Node.prototype.normalize=function(){for(var e=this,t=this.firstChild,n=0,o=s(this),d=function(){var o=t.nextSibling;if(!a(t,3))return t.normalize(),t=o,"continue";var d=t,s=d.length;if(0===s)return F(t,p),--n,t=o,"continue";for(var u="",f=[],c=d.nextSibling;c&&a(c,3);c=c.nextSibling)u+=c.data,f.push(c);u&&d.replaceData(s,0,u);for(var m=r(p),y=function(t){var o=f[t],r=n+t+1;m._ranges.forEach(function(t){t.startContainer===o&&(t.startOffset+=s,t.startContainer=d),t.endContainer===o&&(t.endOffset+=s,t.endContainer=d),t.startContainer===e&&t.startOffset===r&&(t.startContainer=d,t.startOffset=s),t.endContainer===e&&t.endOffset===r&&(t.endContainer=d,t.endOffset=s)}),s+=o.length},h=0,g=f.length;h<g;++h)y(h,g);for(;f.length;)F(f.shift(),p);t=t.nextSibling,++n},p=this;t;)d()},Node.prototype.cloneNode=function(e){return void 0===e&&(e=!1),c(this,e)},Node.prototype.contains=function(e){for(m(arguments,1),e=B(e,Node);e&&e!=this;)e=e.parentNode;return e===this},Node.prototype.isDefaultNamespace=function(e){m(arguments,1),e=H(e),""===e&&(e=null);var t=this.lookupNamespaceURI(null);return t===e},Node.prototype.insertBefore=function(e,t){return m(arguments,2),e=Y(e,Node),t=B(t,Node),L(e,this,t)},Node.prototype.appendChild=function(e){return m(arguments,1),e=Y(e,Node),V(e,this)},Node.prototype.replaceChild=function(e,t){return m(arguments,2),e=Y(e,Node),t=Y(t,Node),z(t,e,this)},Node.prototype.removeChild=function(e){return m(arguments,1),e=Y(e,Node),X(e,this)},Node.ELEMENT_NODE=1,Node.ATTRIBUTE_NODE=2,Node.TEXT_NODE=3,Node.CDATA_SECTION_NODE=4,Node.ENTITY_REFERENCE_NODE=5,Node.ENTITY_NODE=6,Node.PROCESSING_INSTRUCTION_NODE=7,Node.COMMENT_NODE=8,Node.DOCUMENT_NODE=9,Node.DOCUMENT_TYPE_NODE=10,Node.DOCUMENT_FRAGMENT_NODE=11,Node.NOTATION_NODE=12,Node}();Node.prototype.ELEMENT_NODE=1,Node.prototype.ATTRIBUTE_NODE=2,Node.prototype.TEXT_NODE=3,Node.prototype.CDATA_SECTION_NODE=4,Node.prototype.ENTITY_REFERENCE_NODE=5,Node.prototype.ENTITY_NODE=6,Node.prototype.PROCESSING_INSTRUCTION_NODE=7,Node.prototype.COMMENT_NODE=8,Node.prototype.DOCUMENT_NODE=9,Node.prototype.DOCUMENT_TYPE_NODE=10,Node.prototype.DOCUMENT_FRAGMENT_NODE=11,Node.prototype.NOTATION_NODE=12;var ze=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Attr=function(e){function Attr(t,n,o,r,a){var d=e.call(this)||this;return d.namespaceURI=t,d.prefix=n,d.localName=o,d.name=null===n?o:n+":"+o,d._value=r,d.ownerElement=a,d}return ze(Attr,e),Object.defineProperty(Attr.prototype,"nodeType",{get:function(){return 2},enumerable:!0,configurable:!0}),Object.defineProperty(Attr.prototype,"nodeName",{get:function(){return this.name},enumerable:!0,configurable:!0}),Object.defineProperty(Attr.prototype,"nodeValue",{get:function(){return this._value},set:function(e){e=j(e),Z(this,e)},enumerable:!0,configurable:!0}),Attr.prototype.lookupPrefix=function(e){return m(arguments,1),null===this.ownerElement?null:this.ownerElement.lookupPrefix(e)},Attr.prototype.lookupNamespaceURI=function(e){return m(arguments,1),null===this.ownerElement?null:this.ownerElement.lookupNamespaceURI(e)},Object.defineProperty(Attr.prototype,"value",{get:function(){return this._value},set:function(e){Z(this,e)},enumerable:!0,configurable:!0}),Attr.prototype._copy=function(e){var t=r(e),n=new t.Attr(this.namespaceURI,this.prefix,this.localName,this.value,null);return n.ownerDocument=e,n},Attr}(Node),Xe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),CharacterData=function(e){function CharacterData(t){var n=e.call(this)||this;return n._data=t+"",n}return Xe(CharacterData,e),Object.defineProperty(CharacterData.prototype,"nodeValue",{get:function(){return this._data},set:function(e){e=j(e),$(this,0,this.length,e)},enumerable:!0,configurable:!0}),CharacterData.prototype.lookupPrefix=function(e){m(arguments,1);var t=this.parentElement;return null===t?null:t.lookupPrefix(e)},CharacterData.prototype.lookupNamespaceURI=function(e){m(arguments,1);var t=this.parentElement;return null===t?null:t.lookupNamespaceURI(e)},Object.defineProperty(CharacterData.prototype,"previousElementSibling",{get:function(){return P(this)},enumerable:!0,configurable:!0}),Object.defineProperty(CharacterData.prototype,"nextElementSibling",{get:function(){return I(this)},enumerable:!0,configurable:!0}),Object.defineProperty(CharacterData.prototype,"data",{get:function(){return this._data},set:function(e){e=j(e),$(this,0,this.length,e)},enumerable:!0,configurable:!0}),Object.defineProperty(CharacterData.prototype,"length",{get:function(){return this.data.length},enumerable:!0,configurable:!0}),CharacterData.prototype.substringData=function(e,t){return m(arguments,2),ee(this,e,t)},CharacterData.prototype.appendData=function(e){m(arguments,1),$(this,this.length,0,e)},CharacterData.prototype.insertData=function(e,t){m(arguments,1),$(this,e,0,t)},CharacterData.prototype.deleteData=function(e,t){m(arguments,2),$(this,e,t,"")},CharacterData.prototype.replaceData=function(e,t,n){m(arguments,3),$(this,e,t,n)},CharacterData}(Node),Fe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Text=function(e){function Text(t){void 0===t&&(t="");var n=e.call(this,t)||this,o=r(n);return n.ownerDocument=o.document,n}return Fe(Text,e),Object.defineProperty(Text.prototype,"nodeType",{get:function(){return 3},enumerable:!0,configurable:!0}),Object.defineProperty(Text.prototype,"nodeName",{get:function(){return"#text"},enumerable:!0,configurable:!0}),Text.prototype.splitText=function(e){return m(arguments,1),e=q(e),te(this,e)},Text.prototype._copy=function(e){var t=r(e),n=new t.Text(this.data);return n.ownerDocument=e,n},Text}(CharacterData),Qe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),CDATASection=function(e){function CDATASection(t){return e.call(this,t)||this}return Qe(CDATASection,e),Object.defineProperty(CDATASection.prototype,"nodeType",{get:function(){return 4},enumerable:!0,configurable:!0}),Object.defineProperty(CDATASection.prototype,"nodeName",{get:function(){return"#cdata-section"},enumerable:!0,configurable:!0}),CDATASection.prototype._copy=function(e){var t=r(e),n=new t.CDATASection(this.data);return n.ownerDocument=e,n},CDATASection}(Text),qe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Comment=function(e){function Comment(t){void 0===t&&(t="");var n=e.call(this,t)||this,o=r(n);return n.ownerDocument=o.document,n}return qe(Comment,e),Object.defineProperty(Comment.prototype,"nodeType",{get:function(){return 8},enumerable:!0,configurable:!0}),Object.defineProperty(Comment.prototype,"nodeName",{get:function(){return"#comment"},enumerable:!0,configurable:!0}),Comment.prototype._copy=function(e){var t=r(e),n=new t.Comment(this.data);return n.ownerDocument=e,n},Comment}(CharacterData),je=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),DocumentType=function(e){function DocumentType(t,n,o){void 0===n&&(n=""),void 0===o&&(o="");var r=e.call(this)||this;return r.name=t,r.publicId=n,r.systemId=o,r}return je(DocumentType,e),Object.defineProperty(DocumentType.prototype,"nodeType",{get:function(){return 10},enumerable:!0,configurable:!0}),Object.defineProperty(DocumentType.prototype,"nodeName",{get:function(){return this.name},enumerable:!0,configurable:!0}),Object.defineProperty(DocumentType.prototype,"nodeValue",{get:function(){return null},set:function(){},enumerable:!0,configurable:!0}),DocumentType.prototype.lookupPrefix=function(){return m(arguments,1),null},DocumentType.prototype.lookupNamespaceURI=function(){return m(arguments,1),null},DocumentType.prototype._copy=function(e){var t=r(e),n=new t.DocumentType(this.name,this.publicId,this.systemId);return n.ownerDocument=e,n},DocumentType}(Node),Ye="http://www.w3.org/1999/xhtml",Be="http://www.w3.org/2000/xmlns/",He=/^(?:[:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u0131\u0134-\u013E\u0141-\u0148\u014A-\u017E\u0180-\u01C3\u01CD-\u01F0\u01F4\u01F5\u01FA-\u0217\u0250-\u02A8\u02BB-\u02C1\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03CE\u03D0-\u03D6\u03DA\u03DC\u03DE\u03E0\u03E2-\u03F3\u0401-\u040C\u040E-\u044F\u0451-\u045C\u045E-\u0481\u0490-\u04C4\u04C7\u04C8\u04CB\u04CC\u04D0-\u04EB\u04EE-\u04F5\u04F8\u04F9\u0531-\u0556\u0559\u0561-\u0586\u05D0-\u05EA\u05F0-\u05F2\u0621-\u063A\u0641-\u064A\u0671-\u06B7\u06BA-\u06BE\u06C0-\u06CE\u06D0-\u06D3\u06D5\u06E5\u06E6\u0905-\u0939\u093D\u0958-\u0961\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8B\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AE0\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B36-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB5\u0BB7-\u0BB9\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CDE\u0CE0\u0CE1\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D28\u0D2A-\u0D39\u0D60\u0D61\u0E01-\u0E2E\u0E30\u0E32\u0E33\u0E40-\u0E45\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD\u0EAE\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0F40-\u0F47\u0F49-\u0F69\u10A0-\u10C5\u10D0-\u10F6\u1100\u1102\u1103\u1105-\u1107\u1109\u110B\u110C\u110E-\u1112\u113C\u113E\u1140\u114C\u114E\u1150\u1154\u1155\u1159\u115F-\u1161\u1163\u1165\u1167\u1169\u116D\u116E\u1172\u1173\u1175\u119E\u11A8\u11AB\u11AE\u11AF\u11B7\u11B8\u11BA\u11BC-\u11C2\u11EB\u11F0\u11F9\u1E00-\u1E9B\u1EA0-\u1EF9\u1F00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2126\u212A\u212B\u212E\u2180-\u2182\u3007\u3021-\u3029\u3041-\u3094\u30A1-\u30FA\u3105-\u312C\u4E00-\u9FA5\uAC00-\uD7A3])(?:[\-\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u0131\u0134-\u013E\u0141-\u0148\u014A-\u017E\u0180-\u01C3\u01CD-\u01F0\u01F4\u01F5\u01FA-\u0217\u0250-\u02A8\u02BB-\u02C1\u02D0\u02D1\u0300-\u0345\u0360\u0361\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03CE\u03D0-\u03D6\u03DA\u03DC\u03DE\u03E0\u03E2-\u03F3\u0401-\u040C\u040E-\u044F\u0451-\u045C\u045E-\u0481\u0483-\u0486\u0490-\u04C4\u04C7\u04C8\u04CB\u04CC\u04D0-\u04EB\u04EE-\u04F5\u04F8\u04F9\u0531-\u0556\u0559\u0561-\u0586\u0591-\u05A1\u05A3-\u05B9\u05BB-\u05BD\u05BF\u05C1\u05C2\u05C4\u05D0-\u05EA\u05F0-\u05F2\u0621-\u063A\u0640-\u0652\u0660-\u0669\u0670-\u06B7\u06BA-\u06BE\u06C0-\u06CE\u06D0-\u06D3\u06D5-\u06E8\u06EA-\u06ED\u06F0-\u06F9\u0901-\u0903\u0905-\u0939\u093C-\u094D\u0951-\u0954\u0958-\u0963\u0966-\u096F\u0981-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A02\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A59-\u0A5C\u0A5E\u0A66-\u0A74\u0A81-\u0A83\u0A85-\u0A8B\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE0\u0AE6-\u0AEF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B36-\u0B39\u0B3C-\u0B43\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB5\u0BB7-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0BE7-\u0BEF\u0C01-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C60\u0C61\u0C66-\u0C6F\u0C82\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0D02\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D28\u0D2A-\u0D39\u0D3E-\u0D43\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D60\u0D61\u0D66-\u0D6F\u0E01-\u0E2E\u0E30-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD\u0EAE\u0EB0-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F69\u0F71-\u0F84\u0F86-\u0F8B\u0F90-\u0F95\u0F97\u0F99-\u0FAD\u0FB1-\u0FB7\u0FB9\u10A0-\u10C5\u10D0-\u10F6\u1100\u1102\u1103\u1105-\u1107\u1109\u110B\u110C\u110E-\u1112\u113C\u113E\u1140\u114C\u114E\u1150\u1154\u1155\u1159\u115F-\u1161\u1163\u1165\u1167\u1169\u116D\u116E\u1172\u1173\u1175\u119E\u11A8\u11AB\u11AE\u11AF\u11B7\u11B8\u11BA\u11BC-\u11C2\u11EB\u11F0\u11F9\u1E00-\u1E9B\u1EA0-\u1EF9\u1F00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u20D0-\u20DC\u20E1\u2126\u212A\u212B\u212E\u2180-\u2182\u3005\u3007\u3021-\u302F\u3031-\u3035\u3041-\u3094\u3099\u309A\u309D\u309E\u30A1-\u30FA\u30FC-\u30FE\u3105-\u312C\u4E00-\u9FA5\uAC00-\uD7A3])*$/,Ge=function(){function e(){this._map=new Map}return e.prototype.copy=function(){for(var t=new e,n=0,o=Array.from(this._map.entries());n<o.length;n++){var r=o[n],a=r[0],d=r[1];t._map.set(a,d.concat())}return t},e.prototype.retrievePreferredPrefixString=function(e,t){var n=this._map.get(t);if(void 0===n)return null;for(var o,r=0,a=n;r<a.length;r++)if(o=a[r],o===e)return o;return n[n.length-1]},e.prototype.checkIfFound=function(e,t){var n=this._map.get(t);return void 0!==n&&0<=n.indexOf(e)},e.prototype.add=function(e,t){var n=this._map.get(t);void 0===n?this._map.set(t,[e]):n.push(e)},e}(),We=/^(?:[\t\n\r -\uD7FF\uE000-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/,Ke=/^(?:[\n\r !#-%'-;=\?-Z_a-z])*$/,Je=["area","base","basefont","bgsound","br","col","embed","frame","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"],Ze=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Element=function(e){function Element(t,n,o){var r=e.call(this)||this;return r.firstElementChild=null,r.lastElementChild=null,r.childElementCount=0,r.attributes=[],r.namespaceURI=t,r.prefix=n,r.localName=o,r.tagName=null===n?o:n+":"+o,r}return Ze(Element,e),Object.defineProperty(Element.prototype,"nodeType",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(Element.prototype,"nodeName",{get:function(){return this.tagName},enumerable:!0,configurable:!0}),Object.defineProperty(Element.prototype,"nodeValue",{get:function(){return null},set:function(){},enumerable:!0,configurable:!0}),Element.prototype.lookupPrefix=function(e){return m(arguments,1),e=H(e),null===e||""===e?null:de(this,e)},Element.prototype.lookupNamespaceURI=function(e){if(m(arguments,1),e=H(e),""===e&&(e=null),null!==this.namespaceURI&&this.prefix===e)return this.namespaceURI;var t=null;if(null!==e){var n=this.getAttributeNodeNS(Be,e);n&&"xmlns"===n.prefix&&(t=n.value)}else{var n=this.getAttributeNodeNS(Be,"xmlns");n&&null===n.prefix&&(t=n.value)}if(null!==t)return""===t?null:t;var o=this.parentElement;return null===o?null:o.lookupNamespaceURI(e)},Object.defineProperty(Element.prototype,"children",{get:function(){return v(this)},enumerable:!0,configurable:!0}),Object.defineProperty(Element.prototype,"previousElementSibling",{get:function(){return P(this)},enumerable:!0,configurable:!0}),Object.defineProperty(Element.prototype,"nextElementSibling",{get:function(){return I(this)},enumerable:!0,configurable:!0}),Element.prototype.hasAttributes=function(){return 0<this.attributes.length},Element.prototype.getAttribute=function(e){m(arguments,1),e+="";var t=Ce(e,this);return null===t?null:t.value},Element.prototype.getAttributeNS=function(e,t){m(arguments,2),e=H(e),t+="";var n=we(e,t,this);return null===n?null:n.value},Element.prototype.setAttribute=function(e,t){m(arguments,2),e+="",t+="",ne(e)||N("The qualified name does not match the Name production");var n=Ce(e,this);if(null===n){var o=r(this),a=new o.Attr(null,null,e,t,this);return a.ownerDocument=this.ownerDocument,void W(a,this)}G(n,this,t)},Element.prototype.setAttributeNS=function(e,t,n){m(arguments,3),e=H(e),t+="",n+="";var o=ae(e,t),r=o.namespace,a=o.prefix,d=o.localName;De(this,d,n,a,r)},Element.prototype.removeAttribute=function(e){m(arguments,1),e+="",xe(e,this)},Element.prototype.removeAttributeNS=function(e,t){m(arguments,2),e=H(e),t+="",ve(e,t,this)},Element.prototype.toggleAttribute=function(e,t){ne(e)||N("The qualified name does not match the Name production");var n=Ce(e,this);if(null===n){if(void 0===t||!0===t){var o=r(this),a=new o.Attr(null,null,e,"",this);return a.ownerDocument=this.ownerDocument,W(a,this),!0}return!1}return void 0!==t&&!1!==t||(xe(e,this),!1)},Element.prototype.hasAttribute=function(e){return m(arguments,1),e+="",null!==Ce(e,this)},Element.prototype.hasAttributeNS=function(e,t){return m(arguments,2),e=H(e),t+="",null!==we(e,t,this)},Element.prototype.getAttributeNode=function(e){return m(arguments,1),e+="",Ce(e,this)},Element.prototype.getAttributeNodeNS=function(e,t){return m(arguments,2),e=H(e),t+="",we(e,t,this)},Element.prototype.setAttributeNode=function(e){return m(arguments,1),e=Y(e,Attr),Te(e,this)},Element.prototype.setAttributeNodeNS=function(e){return m(arguments,1),e=Y(e,Attr),Te(e,this)},Element.prototype.removeAttributeNode=function(e){return m(arguments,1),e=Y(e,Attr),0>this.attributes.indexOf(e)&&w("the specified attribute does not exist"),K(e,this),e},Element.prototype._copy=function(e){for(var t=Ee(e,this.localName,this.namespaceURI,this.prefix),n=0,o=this.attributes;n<o.length;n++){var r=o[n],a=r._copy(e);t.setAttributeNode(a)}return t},Object.defineProperty(Element.prototype,"innerHTML",{get:function(){return pe(this,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(Element.prototype,"outerHTML",{get:function(){return pe(this,!0,!0)},enumerable:!0,configurable:!0}),Element}(Node),DOMImplementation=function(){function DOMImplementation(e){this._document=e}return DOMImplementation.prototype.createDocumentType=function(e,t,n){m(arguments,3),e+="",t+="",n+="",re(e);var o=r(this._document),a=new o.DocumentType(e,t,n);return a.ownerDocument=this._document,a},DOMImplementation.prototype.createDocument=function(e,t,n){void 0===n&&(n=null),m(arguments,2),e=H(e),t=j(t),n=B(n,DocumentType);var o=r(this._document),a=new o.XMLDocument,d=null;return""!==t&&(d=Se(a,e,t)),n&&a.appendChild(n),d&&a.appendChild(d),a},DOMImplementation.prototype.createHTMLDocument=function(e){e=H(e);var t=r(this._document),n=new t.Document,o=new t.DocumentType("html");o.ownerDocument=n,n.appendChild(o);var a=Ee(n,"html",Ye);n.appendChild(a);var d=Ee(n,"head",Ye);if(a.appendChild(d),null!==e){var i=Ee(n,"title",Ye);d.appendChild(i),i.appendChild(n.createTextNode(e))}return a.appendChild(Ee(n,"body",Ye)),n},DOMImplementation}(),$e=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Document=function(e){function Document(){var t=e.call(this)||this;return t.firstElementChild=null,t.lastElementChild=null,t.childElementCount=0,t.implementation=new DOMImplementation(t),t.doctype=null,t.documentElement=null,t}return $e(Document,e),Object.defineProperty(Document.prototype,"nodeType",{get:function(){return 9},enumerable:!0,configurable:!0}),Object.defineProperty(Document.prototype,"nodeName",{get:function(){return"#document"},enumerable:!0,configurable:!0}),Object.defineProperty(Document.prototype,"nodeValue",{get:function(){return null},set:function(){},enumerable:!0,configurable:!0}),Document.prototype.lookupPrefix=function(e){return m(arguments,1),null===this.documentElement?null:this.documentElement.lookupPrefix(e)},Document.prototype.lookupNamespaceURI=function(e){return m(arguments,1),null===this.documentElement?null:this.documentElement.lookupNamespaceURI(e)},Object.defineProperty(Document.prototype,"children",{get:function(){return v(this)},enumerable:!0,configurable:!0}),Document.prototype.createElement=function(e){m(arguments,1),e+="",ne(e)||N("The local name is not a valid Name");var t=Ee(this,e,null,null);return t},Document.prototype.createElementNS=function(e,t){return m(arguments,2),e=H(e),t+="",Se(this,e,t)},Document.prototype.createDocumentFragment=function(){var e=r(this),t=new e.DocumentFragment;return t.ownerDocument=this,t},Document.prototype.createTextNode=function(e){m(arguments,1),e+="";var t=r(this),n=new t.Text(e);return n.ownerDocument=this,n},Document.prototype.createCDATASection=function(e){m(arguments,1),e+="",0<=e.indexOf("]]>")&&N("Data must not contain the string \"]]>\"");var t=r(this),n=new t.CDATASection(e);return n.ownerDocument=this,n},Document.prototype.createComment=function(e){m(arguments,1),e+="";var t=r(this),n=new t.Comment(e);return n.ownerDocument=this,n},Document.prototype.createProcessingInstruction=function(e,t){m(arguments,2),e+="",t+="",ne(e)||N("The target is not a valid Name"),0<=t.indexOf("?>")&&N("Data must not contain the string \"?>\"");var n=r(this),o=new n.ProcessingInstruction(e,t);return o.ownerDocument=this,o},Document.prototype.importNode=function(e,t){return void 0===t&&(t=!1),m(arguments,1),e=Y(e,Node),a(e,9)&&T("importing a Document node is not supported"),c(e,t,this)},Document.prototype.adoptNode=function(e){return m(arguments,1),e=Y(e,Node),a(e,9)&&T("adopting a Document node is not supported"),Q(e,this),e},Document.prototype.createAttribute=function(e){m(arguments,1),e+="",ne(e)||N("The local name is not a valid Name");var t=r(this),n=new t.Attr(null,null,e,"",null);return n.ownerDocument=this,n},Document.prototype.createAttributeNS=function(e,t){m(arguments,2),e=H(e),t+="";var n=ae(e,t),o=n.namespace,a=n.prefix,d=n.localName,i=r(this),p=new i.Attr(o,a,d,"",null);return p.ownerDocument=this,p},Document.prototype.createRange=function(){var e=r(this),t=new e.Range;return t.startContainer=this,t.startOffset=0,t.endContainer=this,t.endOffset=0,t},Document.prototype._copy=function(e){var t=r(e);return new t.Document},Document}(Node),et=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),DocumentFragment=function(e){function DocumentFragment(){var t=e.call(this)||this;t.firstElementChild=null,t.lastElementChild=null,t.childElementCount=0;var n=r(t);return t.ownerDocument=n.document,t}return et(DocumentFragment,e),Object.defineProperty(DocumentFragment.prototype,"nodeType",{get:function(){return 11},enumerable:!0,configurable:!0}),Object.defineProperty(DocumentFragment.prototype,"nodeName",{get:function(){return"#document-fragment"},enumerable:!0,configurable:!0}),Object.defineProperty(DocumentFragment.prototype,"nodeValue",{get:function(){return null},set:function(){},enumerable:!0,configurable:!0}),DocumentFragment.prototype.lookupPrefix=function(){return m(arguments,1),null},DocumentFragment.prototype.lookupNamespaceURI=function(){return m(arguments,1),null},Object.defineProperty(DocumentFragment.prototype,"children",{get:function(){return v(this)},enumerable:!0,configurable:!0}),DocumentFragment.prototype._copy=function(e){var t=r(e),n=new t.DocumentFragment;return n.ownerDocument=e,n},DocumentFragment}(Node),tt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ProcessingInstruction=function(e){function ProcessingInstruction(t,n){var o=e.call(this,n)||this;return o.target=t,o}return tt(ProcessingInstruction,e),Object.defineProperty(ProcessingInstruction.prototype,"nodeType",{get:function(){return 7},enumerable:!0,configurable:!0}),Object.defineProperty(ProcessingInstruction.prototype,"nodeName",{get:function(){return this.target},enumerable:!0,configurable:!0}),ProcessingInstruction.prototype._copy=function(e){var t=r(e),n=new t.ProcessingInstruction(this.target,this.data);return n.ownerDocument=e,n},ProcessingInstruction}(CharacterData),Range=function(){function Range(){var e=r(this);this.startContainer=e.document,this.startOffset=0,this.endContainer=e.document,this.endOffset=0,e._ranges.push(this)}return Object.defineProperty(Range.prototype,"collapsed",{get:function(){return Pe(this)},enumerable:!0,configurable:!0}),Object.defineProperty(Range.prototype,"commonAncestorContainer",{get:function(){for(var e=p(this.startContainer),t=p(this.endContainer),n=e[0],o=0;o<e.length&&o<t.length&&e[o]===t[o];)n=e[o],++o;return n},enumerable:!0,configurable:!0}),Range.prototype.setStart=function(e,t){m(arguments,2),e=Y(e,Node),t=q(t),a(e,10)&&O("Can not set a range under a doctype node"),t>d(e)&&b("Can not set a range past the end of the node");var n=u(e),o=Re(this);(n!==o||Ie(e,t,this.endContainer,this.endOffset)===ot)&&(this.endContainer=e,this.endOffset=t),this.startContainer=e,this.startOffset=t},Range.prototype.setEnd=function(e,t){m(arguments,2),e=Y(e,Node),t=q(t),a(e,10)&&O("Can not set a range under a doctype node"),t>d(e)&&b("Can not set a range past the end of the node");var n=u(e),o=Re(this);(n!==o||Ie(e,t,this.startContainer,this.startOffset)===nt)&&(this.startContainer=e,this.startOffset=t),this.endContainer=e,this.endOffset=t},Range.prototype.setStartBefore=function(e){m(arguments,1),e=Y(e,Node);var t=e.parentNode;return null===t?O("Can not set range before node without a parent"):void this.setStart(t,l(e))},Range.prototype.setStartAfter=function(e){m(arguments,1),e=Y(e,Node);var t=e.parentNode;return null===t?O("Can not set range before node without a parent"):void this.setStart(t,l(e)+1)},Range.prototype.setEndBefore=function(e){m(arguments,1),e=Y(e,Node);var t=e.parentNode;return null===t?O("Can not set range before node without a parent"):void this.setEnd(t,l(e))},Range.prototype.setEndAfter=function(e){m(arguments,1),e=Y(e,Node);var t=e.parentNode;return null===t?O("Can not set range before node without a parent"):void this.setEnd(t,l(e)+1)},Range.prototype.collapse=function(e){void 0===e&&(e=!1),e?(this.endContainer=this.startContainer,this.endOffset=this.startOffset):(this.startContainer=this.endContainer,this.startOffset=this.endOffset)},Range.prototype.selectNode=function(e){m(arguments,1),e=Y(e,Node);var t=e.parentNode;if(null===t)return O("Can not select node with null parent");var n=l(e);this.startContainer=t,this.startOffset=n,this.endContainer=t,this.endOffset=n+1},Range.prototype.selectNodeContents=function(e){m(arguments,1),e=Y(e,Node),a(e,10)&&O("Can not place range inside a doctype node");var t=d(e);this.startContainer=e,this.startOffset=0,this.endContainer=e,this.endOffset=t},Range.prototype.compareBoundaryPoints=function(e,t){return m(arguments,2),t=Y(t,Range),e!==Range.START_TO_START&&e!==Range.START_TO_END&&e!==Range.END_TO_END&&e!==Range.END_TO_START&&T("Unsupported comparison type"),Re(this)!==Re(t)&&D("Can not compare positions of ranges in different trees"),e===Range.START_TO_START?Ie(this.startContainer,this.startOffset,t.startContainer,t.startOffset):e===Range.START_TO_END?Ie(this.endContainer,this.endOffset,t.startContainer,t.startOffset):e===Range.END_TO_END?Ie(this.endContainer,this.endOffset,t.endContainer,t.endOffset):Ie(this.startContainer,this.startOffset,t.endContainer,t.endOffset)},Range.prototype.cloneRange=function(){var e=r(this),t=new e.Range;return t.startContainer=this.startContainer,t.startOffset=this.startOffset,t.endContainer=this.endContainer,t.endOffset=this.endOffset,t},Range.prototype.detach=function(){var e=r(this),t=e._ranges.indexOf(this);0<=t&&e._ranges.splice(t,1)},Range.prototype.isPointInRange=function(e,t){return(m(arguments,2),e=Y(e,Node),t=q(t),u(e)===Re(this))&&(a(e,10)&&O("Point can not be under a doctype"),t>d(e)&&b("Offset should not be past the end of node"),Ie(e,t,this.startContainer,this.startOffset)!==nt&&Ie(e,t,this.endContainer,this.endOffset)!==ot)},Range.prototype.comparePoint=function(e,t){return m(arguments,2),e=Y(e,Node),t=q(t),u(e)!==Re(this)&&D("Can not compare point to range in different trees"),a(e,10)&&O("Point can not be under a doctype"),t>d(e)&&b("Offset should not be past the end of node"),Ie(e,t,this.startContainer,this.startOffset)===nt?-1:Ie(e,t,this.endContainer,this.endOffset)===ot?1:0},Range.prototype.intersectsNode=function(e){if(m(arguments,1),e=Y(e,Node),u(e)!==Re(this))return!1;var t=e.parentNode;if(null===t)return!0;var n=l(e);return Ie(t,n,this.endContainer,this.endOffset)===nt&&Ie(t,n+1,this.startContainer,this.startOffset)===ot},Range.START_TO_START=0,Range.START_TO_END=1,Range.END_TO_END=2,Range.END_TO_START=3,Range}(),nt=-1,ot=1,rt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),XMLDocument=function(e){function XMLDocument(){return null!==e&&e.apply(this,arguments)||this}return rt(XMLDocument,e),XMLDocument.prototype._copy=function(e){var t=r(e);return new t.XMLDocument},XMLDocument}(Document),XMLSerializer=function(){function XMLSerializer(){}return XMLSerializer.prototype.serializeToString=function(e){e=Y(e,Node);var t=[];return se(e,!1,t),t.join("")},XMLSerializer}(),MutationObserver=function(){function MutationObserver(e){this._nodes=[],this._recordQueue=[],this._transients=[],m(arguments,1),e=Y(e,Function),this._callback=e}return MutationObserver.prototype.observe=function(e,t){if(m(arguments,2),e=Y(e,Node),t.childList=!!t.childList,t.subtree=!!t.subtree,void 0!==t.attributeOldValue&&void 0===t.attributes&&(t.attributes=!0),void 0!==t.characterDataOldValue&&void 0===t.characterData&&(t.characterData=!0),!(t.childList||t.attributes||t.characterData))throw new TypeError("The options object must set at least one of \"attributes\", \"characterData\", or \"childList\" to true.");if(t.attributeOldValue&&!t.attributes)throw new TypeError("The options object may only set \"attributeOldValue\" to true when \"attributes\" is true or not present.");if(t.characterDataOldValue&&!t.characterData)throw new TypeError("The options object may only set \"characterDataOldValue\" to true when \"characterData\" is true or not present.");e._registeredObservers.register(this,t)},MutationObserver.prototype.disconnect=function(){var e=this;this._nodes.forEach(function(t){return t._registeredObservers.removeForObserver(e)}),this._nodes.length=0,this._recordQueue.length=0},MutationObserver.prototype.takeRecords=function(){var e=this._recordQueue.concat();return this._recordQueue.length=0,e},MutationObserver}(),at=new Document;ke.document=at,ke.Attr=Attr,ke.CDATASection=CDATASection,ke.Comment=Comment,ke.Document=Document,ke.DocumentFragment=DocumentFragment,ke.DocumentType=DocumentType,ke.DOMImplementation=DOMImplementation,ke.Element=Element,ke.ProcessingInstruction=ProcessingInstruction,ke.Range=Range,ke.Text=Text,ke.XMLDocument=XMLDocument,e.document=at,e.Attr=Attr,e.CDATASection=CDATASection,e.CharacterData=CharacterData,e.Comment=Comment,e.Document=Document,e.DocumentFragment=DocumentFragment,e.DocumentType=DocumentType,e.DOMImplementation=DOMImplementation,e.Element=Element,e.Node=Node,e.ProcessingInstruction=ProcessingInstruction,e.Range=Range,e.Text=Text,e.XMLDocument=XMLDocument,e.XMLSerializer=XMLSerializer,e.MutationObserver=MutationObserver,e.MutationRecord=Ve,e.serializeToWellFormedString=function(e){e=Y(e,Node);var t=[];return se(e,!0,t),t.join("")},e.unsafeCreateAttribute=function(e,t,n,o,r){return new Attr(e,t,n,o,r)},e.unsafeCreateElement=Ee,e.unsafeAppendAttribute=W,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=slimdom.js.map
